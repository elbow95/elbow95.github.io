---
layout: post
title: 简单解决打开盘符提示需要格式化及显示参数错误问题
date: '2016-4-23'
categories:
  - windows
---

**数据无价，谨慎操作。**

今天遇到了一件非常揪心的事，ubuntu 16.04刚刚发布，想装一个双系统玩儿，打开磁盘管理发现恢复分区太多了，于是就给剩下一个其他的都给删了，凑着也把华硕电脑出厂自带的Restore分区给删了，删完就出事了，F盘打不开了，不过还是给救回来了，如果你也遇到了这样的问题，那么下面的东西可能对你会有所帮助。  

这里凑着说一下关于安装win10之后出现的恢复分区的删留问题，在网上查了一些资料，都不是太有实际价值，不过在 [这里](http://benyouhui.it168.com/forum.php?mod=viewthread&tid=5373642){:target="_blank"}还是看到了一些有用的东西。  

如果想要编辑隐藏的恢复分区，用自带的分区编辑工具是很难实现的，可以用DiskGenius分区工具进行分区的修改等。  

系统C盘前的ESP 100M分区为EFI系统分区，MSR 128M分区为微软保留分区，Recovery分区为Windows恢复环境（厂商可能会对此进行修改，不同品牌这个分区大小也不同），均不建议删除；紧挨着C盘之后的恢复分区均为WindowsRE恢复环境，如果出现多个，可以通过DiskGenius查看当中文件记录信息进行取舍，可以删除剩下一个，如果不使用当前系统的恢复选项，亦可以全部删除；在所有盘符最后的Restore恢复分区放出厂系统镜像，如果不使用电脑自带一键恢复，可以删除。  

当我把最后一个Restore分区删除之后，突然之间最后一个F盘在系统中就无法访问了，但是在DiskGenius中还是可以看到全部的文件信息。  

**如果下面的方法对于你的电脑无效，那么你可以在DiskGenius里将盘里的文件拷贝到另外盘中再进行格式化即可。**

## # 解决方法

使用`win + x`组合键打开面板，选择CMD命令行(管理员)工具，打开后输入`chkdsk x:/f`(x为需要检查并修复的盘符) 进行磁盘检查及修复，等待其完成，磁盘即可重新可用。

## # 关于chkdsk命令

`chkdsk`的全称为`checkdisk`，顾名思义为磁盘检查的意思。这个东西是当你的系统当掉或者非法关机的时候由系统来调用检查磁盘的，也可以由手工通过命令行调用来检查某一个磁盘分区。该工具基于被检测的分区所用的文件系统，创建和显示磁盘的状态报告。`chkdsk`还会列出并纠正磁盘上的错误。如果不带任何参数，其将显示当前驱动器中的磁盘状态。

## # 参数说明

`CHKDSK [volume[[path]filename]]] [/F] [/V] [/R] [/X] [/I] [/C] [/L[:size]]`

`volume` 指定驱动器(后面跟一个冒号)、装入点或卷名<br>
`filename` 仅用于 FAT/FAT32: 指定要检查是否有碎片的文件<br>
`/F` 修复磁盘上的错误<br>
`/V` 在 FAT/FAT32 上: 显示磁盘上每个文件的完整路径和名称；在 NTFS 上: 如果有清除消息，将其显示<br>
`/R` 查找不正确的扇区并恢复可读信息(隐含 /F)<br>
`/L:size` 仅用于 NTFS: 将日志文件大小改成指定的 KB 数，如果没有指定大小，则显示当前的大小<br>
`/X` 如果必要，强制卷先卸下，卷的所有打开的句柄就会无效(隐含 /F)<br>
`/I` 仅用于 NTFS: 对索引项进行强度较小的检查<br>
`/C` 仅用于 NTFS: 跳过文件夹结构的循环检查

**注：** /I 和 /C 命令行开关跳过卷的某些检查，减少运行 Chkdsk 所需的时间

## # 如何使用chkdsk命令

检查并修复磁盘分区可在CMD(管理员)下运行`chkdsk x:/f`(x为需要检查并修复的盘符)，即可检查并修复。

## # 其他

只有指定 `/f` 命令行选项，`chkdsk` 命令才修复磁盘错误。`chkdsk` 必须可以锁定驱动器以纠正错误。<br>
如果不使用 `/f` 命令行选项，则在有文件需要修复时，chkdsk 会发送消息，但它不修复任何错误。  
